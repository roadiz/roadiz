{% if not head.ajax %}{% set baseTemplate = 'base.html.twig' %}{% else %}{% set baseTemplate = 'ajaxBase.html.twig' %}{% endif %}{% extends baseTemplate %}

{% block content %}
<section class="content-global content-nav-and-filters">
	<header class="content-header header-document header-document-list">
        {% if folder %}
        <h1 class="content-title">{{ folder.name }}</h1>
        {% else %}
        <h1 class="content-title">{% trans %}documents{% endtrans %}</h1>
        {% endif %}
        {% include 'widgets/countFiltersBar.html.twig' %}
        <div class="content-header-action-menu">

            <a class="uk-button" href="{{ path('documentsUploadPage', {folderId: folder.id}) }}"><i class="uk-icon-rz-upload"></i> {% trans %}upload.document{% endtrans %}</a>
           	<a class="uk-button" href="{{ path('documentsEmbedPage', {folderId: folder.id}) }}"><i class="uk-icon-rz-embed"></i> {% trans %}embed.document{% endtrans %}</a>
           	<a class="uk-button rz-no-ajax-link" href="{{ path('documentsRandomPage', {folderId: folder.id}) }}"><i class="uk-icon-magic"></i> {% trans %}random.document{% endtrans %}</a>
        </div>
    </header>

    {% include 'widgets/filtersBar.html.twig' %}

    <nav class="bulk-actions documents-bulk-actions">
        
        <div class="bulk-actions-title-cont">
            <h3 class="bulk-actions-title documents-bulk-actions-title">{% trans %}bulk.actions{% endtrans %}</h3>
        </div>

        <a class="uk-button uk-button-content uk-button-small uk-button-danger uk-button-bulk-delete document-bulk-delete" href="#" title="{% trans %}bulk.delete.documents{% endtrans %}" data-uk-tooltip="{animation:true}"><i class="uk-icon-rz-trash-mini-o"></i></a>

        {% form_theme joinFolderForm 'forms.html.twig' %}
        <form class="uk-form uk-form-horizontal document-bulk-folder-form" action="#" method="post" {{ form_enctype(joinFolderForm) }}>
            {{ form_widget(joinFolderForm) }}
            {% spaceless %}
            <button class="uk-button uk-button-primary uk-button-content uk-button-bulk-primary" type="submit" title="{% trans %}bulk.fold.documents{% endtrans %}" data-uk-tooltip="{animation:true}">
                <i class="uk-icon-rz-plus-simple"></i>
                <!-- <span class="icon-container"><i class="uk-icon-folder-o"></i></span> -->
                <!-- <span class="label"><span class="label-text">{% trans %}bulk.fold.documents{% endtrans %}</span></span> -->
            </button>
            {% endspaceless %}
        </form>
    </nav>

    <article class="content content-no-action-menu">

        {% spaceless %}
        <ul class="documents-list">
        {% for document in documents %}

            <li class="document-item">
                <div class="document-border"></div>
                <figure class="document-image">
                    {% if document.isImage %}
                        {{ document.getViewer.getDocumentByArray(thumbnailFormat)|raw }}
                    {% else %}
                        <div class="document-platform-icon"><i class="uk-icon-file-{{ document.getShortType }}-o"></i></div>
                    {% endif %}
                </figure>
                <div class="document-name">{{ document.getFilename|centralTruncate(18, -4)}}</div>
                <div class="document-overflow">
                    <input class="document-checkbox" type="checkbox" name="documents[]" value="{{ document.getId }}" />
                    <div class="document-links">
                        <a class="uk-button uk-button-small document-link" href="{{ path('documentsEditPage', { documentId: document.getId }) }}"><i class="uk-icon-rz-pencil"></i></a>
                        <a class="uk-button uk-button-small uk-button-danger document-link" href="{{ path('documentsDeletePage', { documentId: document.getId }) }}"><i class="uk-icon-rz-trash-mini-o"></i></a>
                    </div>
                    {% if document.isEmbed %}
                        <div class="document-mime-type">{{ document.getEmbedPlatform }}</div>
                        <div class="document-platform-icon"><i class="uk-icon-rz-{{ document.getEmbedPlatform }}"></i></div>
                    {% else %}
                        <div class="document-mime-type">{{ document.getShortMimeType }}</div>
                    {% endif %}
                </div>
            </li>

        {% endfor %}
        </ul>
        {% endspaceless %}

	</article>
</section>
{% endblock %}
